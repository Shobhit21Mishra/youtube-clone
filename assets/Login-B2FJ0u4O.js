import{r as o,u as b,c as y,d as w,a as j,e as v,y as c,j as e,b as N,L,l as E}from"./index-DtHP9t1G.js";function C(){var g,x;const[a,p]=o.useState({email:"",password:""}),r=b(),i=y(),f=w(),{error:l,loading:t,user:u}=j(s=>s.auth),d=((x=(g=f.state)==null?void 0:g.from)==null?void 0:x.pathname)||"/";o.useEffect(()=>{r(v())},[r]),o.useEffect(()=>{u&&(c.success("Login successful!"),i(d,{replace:!0}))},[u,i,d]);const m=s=>p({...a,[s.target.name]:s.target.value}),h=async s=>{s.preventDefault();try{const n=await r(E(a)).unwrap();c.success("Welcome back, "+n.username+"!")}catch(n){c.error(n.message||"Login failed.")}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 px-4",children:e.jsxs("div",{className:"relative w-full max-w-md p-8 bg-white rounded-lg shadow-md",children:[t&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-60 flex justify-center items-center z-10",children:e.jsx(N,{})}),e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center text-gray-800",children:"Login to Your Account"}),l&&!t&&e.jsx("div",{className:"bg-red-100 text-red-700 px-4 py-2 rounded mb-4 text-sm text-center",children:l}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsx("input",{type:"email",name:"email",value:a.email,onChange:m,placeholder:"Email",required:!0,className:"w-full border px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("input",{type:"password",name:"password",value:a.password,onChange:m,placeholder:"Password",required:!0,className:"w-full border px-4 py-2 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"}),e.jsx("button",{type:"submit",disabled:t,className:`w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition ${t?"opacity-50 cursor-not-allowed":""}`,children:t?"Logging in...":"Login"})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-600",children:["Don't have an account?"," ",e.jsx(L,{to:"/register",className:"text-blue-600 hover:underline font-medium",children:"Register here"})]})]})})}export{C as default};
