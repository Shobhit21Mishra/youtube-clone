import{j as t,L as p,u as w,a as c,r as d,f as b,b as j}from"./index-DtHP9t1G.js";import{f as N,h as y}from"./formatDuration-CfKS_jPf.js";const v=["All","Music","Gaming","News","Sports","Education","Entertainment","Movies","Web Development"];function k({selectedFilter:e,onSelectFilter:l}){return t.jsx("div",{className:"flex gap-6 overflow-x-auto py-3 px-4 scrollbar-hide",children:v.map(a=>{const n=e===a;return t.jsx("button",{onClick:()=>l(a),className:`
              px-6 py-2 text-base font-semibold rounded-full whitespace-nowrap
              transition-colors duration-300 shadow-sm
              ${n?"bg-black text-white shadow-md":"bg-gray-200 text-gray-700 hover:bg-gray-300 hover:text-black"}
              focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-1
            `,children:a},a)})})}const A=({video:e})=>{var l,a,n,o,r;return e?t.jsxs(p,{to:`/video/${e._id}`,className:"w-full sm:max-w-xs md:max-w-sm lg:max-w-md xl:max-w-lg transition-transform hover:scale-105 group rounded-lg shadow-lg bg-white overflow-hidden","aria-label":`Watch video titled ${e.title}`,children:[t.jsxs("div",{className:"relative aspect-video bg-gray-100 rounded-t-lg overflow-hidden shadow-sm",children:[t.jsx("img",{src:e.thumbnailUrl||"/default-thumbnail.jpg",alt:e.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy"}),e.duration&&t.jsx("span",{className:"absolute bottom-2 right-2 text-xs bg-black bg-opacity-75 text-white px-2 py-0.5 rounded-md font-mono select-none",children:N(e.duration)})]}),t.jsxs("div",{className:"flex gap-4 p-4",children:[t.jsx("img",{src:((l=e.channel)==null?void 0:l.channelBanner)||"/default-avatar.png",alt:`${((a=e.channel)==null?void 0:a.channelName)||"Channel"} avatar`,className:"w-12 h-12 rounded-full object-cover border border-gray-300 flex-shrink-0",loading:"lazy"}),t.jsxs("div",{className:"flex flex-col overflow-hidden",children:[t.jsx("h3",{className:"text-base font-semibold leading-tight text-gray-900 line-clamp-2",title:e.title,children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 truncate mt-1",title:(n=e.channel)==null?void 0:n.channelName,children:((o=e.channel)==null?void 0:o.channelName)||"Unknown Channel"}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[((r=e.views)==null?void 0:r.toLocaleString())||0," views â€¢ ",y(e.createdAt).fromNow()]})]})]})]}):null},L=()=>{const e=w(),{videos:l,loading:a}=c(s=>s.videos),{term:n}=c(s=>s.search),{isSidebarOpen:o}=c(s=>s.ui),[r,m]=d.useState("All");d.useEffect(()=>{e(b())},[e]);const x=s=>{m(r===s?"All":s)},h=d.useMemo(()=>{let s=l;if(r!=="All"&&(s=s.filter(i=>i.category===r)),n.trim()){const i=n.toLowerCase();s=s.filter(f=>{var u;return(u=f.title)==null?void 0:u.toLowerCase().includes(i)})}return s},[l,r,n]);if(a)return t.jsx(j,{});const g=!a&&l.length>0&&h.length===0;return t.jsxs("div",{className:"w-full",children:[t.jsx(k,{selectedFilter:r,onSelectFilter:x}),g?t.jsx("p",{className:"text-center text-gray-600 mt-10",children:"No videos found."}):t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 mt-6",children:h.map(s=>t.jsx(A,{video:s},s._id))})]})};export{L as default};
