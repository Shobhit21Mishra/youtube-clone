import{m as T,u as V,c as q,r as l,j as e,b as D,y as i,p as E}from"./index-DtHP9t1G.js";const F=()=>{const{id:x}=T(),b=V(),g=q(),[o,v]=l.useState(""),[r,f]=l.useState(""),[s,j]=l.useState(""),[d,w]=l.useState(null),[u,c]=l.useState(null),[p,h]=l.useState(null),[n,m]=l.useState(!1),y=a=>{const t=a.target.files[0];c(t),h(URL.createObjectURL(t))},N=()=>{c(null),h(null)},S=a=>{w(a.target.files[0])},C=async a=>{if(a.preventDefault(),!d||!u||!s){i.error("All fields including video, thumbnail, and category are required!");return}const t=new FormData;t.append("title",o),t.append("description",r),t.append("category",s),t.append("video",d),t.append("thumbnail",u),m(!0);try{await b(E(t)).unwrap(),i.success("Video uploaded successfully!"),g(`/channel/${x}`)}catch(U){console.error("Upload failed:",U),i.error("Video upload failed. Please try again.")}finally{m(!1)}};return e.jsxs("div",{className:"max-w-2xl mx-auto p-6 bg-white shadow rounded mt-8",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Upload New Video"}),n&&e.jsx(D,{}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Title",value:o,onChange:a=>v(a.target.value),className:"w-full border p-3 rounded",required:!0}),e.jsx("textarea",{placeholder:"Description",value:r,onChange:a=>f(a.target.value),className:"w-full border p-3 rounded",required:!0}),e.jsxs("select",{value:s,onChange:a=>j(a.target.value),className:"w-full border p-3 rounded",required:!0,children:[e.jsx("option",{value:"",children:"Select Category"}),e.jsx("option",{value:"Music",children:"Music"}),e.jsx("option",{value:"Gaming",children:"Gaming"}),e.jsx("option",{value:"Education",children:"Education"}),e.jsx("option",{value:"News",children:"News"}),e.jsx("option",{value:"Sports",children:"Sports"}),e.jsx("option",{value:"Entertainment",children:"Entertainment"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-medium",children:"Upload Video File"}),e.jsx("input",{type:"file",accept:"video/*",onChange:S,required:!0,className:"w-full"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block font-medium",children:"Upload Thumbnail"}),e.jsx("input",{type:"file",accept:"image/*",onChange:y,required:!0,className:"w-full"}),p&&e.jsxs("div",{className:"relative w-40 mt-2",children:[e.jsx("img",{src:p,alt:"Thumbnail Preview",className:"rounded shadow border"}),e.jsx("button",{type:"button",onClick:N,className:"absolute top-0 right-0 bg-red-500 text-white px-1 rounded-bl hover:bg-red-600",children:"âœ•"})]})]}),e.jsx("button",{type:"submit",disabled:n,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:n?"Uploading...":"Upload"})]})]})};export{F as default};
