import{u as w,c as j,a as y,r as l,y as f,e as N,j as e,L as v,g as x}from"./index-DtHP9t1G.js";function R(){const n=w(),i=j(),{user:d,error:o,loading:u}=y(s=>s.auth),[a,c]=l.useState({name:"",email:"",password:"",profilePic:null}),[m,p]=l.useState(null);l.useEffect(()=>{d&&i("/")},[d,i]),l.useEffect(()=>(o&&f.error(o),()=>{n(N())}),[o,n]);const r=s=>{if(s.target.name==="profilePic"){const t=s.target.files[0];c({...a,profilePic:t}),t&&p(URL.createObjectURL(t))}else c({...a,[s.target.name]:s.target.value})},h=()=>{c({...a,profilePic:null}),p(null)},g=async s=>{s.preventDefault();const t=new FormData;t.append("username",a.name),t.append("email",a.email),t.append("password",a.password),a.profilePic&&t.append("profile",a.profilePic);const b=await n(x(t));x.fulfilled.match(b)&&(f.success("Registered successfully! Redirecting to login..."),i("/login"))};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 px-4",children:e.jsxs("div",{className:"w-full max-w-md p-8 bg-white rounded-xl shadow",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Create an Account"}),e.jsxs("form",{onSubmit:g,encType:"multipart/form-data",className:"space-y-4",children:[e.jsx("input",{type:"text",name:"name",onChange:r,placeholder:"Name",required:!0,className:"w-full border px-4 py-2 rounded outline-none"}),e.jsx("input",{type:"email",name:"email",onChange:r,placeholder:"Email",required:!0,className:"w-full border px-4 py-2 rounded outline-none"}),e.jsx("input",{type:"password",name:"password",onChange:r,placeholder:"Password",required:!0,className:"w-full border px-4 py-2 rounded outline-none"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Profile Picture"}),e.jsx("input",{type:"file",name:"profilePic",accept:"image/*",onChange:r,className:"w-full border px-3 py-2 rounded"}),m&&e.jsxs("div",{className:"relative w-32 h-32 mt-2",children:[e.jsx("img",{src:m,alt:"Preview",className:"w-full h-full object-cover rounded border"}),e.jsx("button",{type:"button",onClick:h,className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 text-xs",children:"âœ•"})]})]}),e.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 transition disabled:opacity-60",disabled:u,children:u?"Registering...":"Register"})]}),e.jsxs("p",{className:"mt-4 text-center text-sm",children:["Already have an account?"," ",e.jsx(v,{to:"/login",className:"text-blue-600 hover:underline font-medium",children:"Login here"})]})]})})}export{R as default};
